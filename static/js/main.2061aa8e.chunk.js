(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(5),i=a.n(r),c=(a(16),a(10)),s=a(1),l=a(6),u=a.n(l);var p=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("a",{href:"/"},o.a.createElement("img",{src:u.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e",className:"header__logo"})))};var m=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,r=e.onCardDelete,i=e.cardDeleteButtonClassName,c=e.cardLikeButtonClassName;return o.a.createElement("div",{className:"elements__card"},o.a.createElement("img",{src:t.link,alt:t.name,className:"elements__photo",onClick:function(){a(t)}}),o.a.createElement("div",{className:"elements__container"},o.a.createElement("p",{className:"elements__title"},t.name),o.a.createElement("div",{className:"elements__like-container"},o.a.createElement("button",{type:"button",onClick:function(){n(t)},className:c}),o.a.createElement("p",{className:"elements__counter"},t.likes.length))),o.a.createElement("button",{type:"button",onClick:function(){r(t)},className:"elements__trash-bin ".concat(i)}))},_=o.a.createContext(),d=a(7),h=a.n(d);var f=function(e){var t=e.cards,a=e.onEditProfile,n=e.onAddPlace,r=e.onEditAvatar,i=e.onCardClick,c=e.onCardLike,s=e.onCardDelete,l=o.a.useContext(_),u=l.avatar,p=l.name,d=l.about,f=l._id;return o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"profile"},o.a.createElement("button",{className:"profile__button-avatar",onClick:r},o.a.createElement("img",{src:u||h.a,alt:"\u0412\u0430\u0448 \u0430\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"})),o.a.createElement("div",{className:"profile__name-container"},o.a.createElement("h1",{className:"profile__name"},p||"\u0418\u043c\u044f"),o.a.createElement("button",{type:"button",className:"profile__button-edit",onClick:a})),o.a.createElement("p",{className:"profile__bio"},d||"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),o.a.createElement("button",{type:"button",className:"profile__button-add",onClick:n})),o.a.createElement("main",{className:"elements"},t.map((function(e){var t=e.owner._id===f,a="elements__trash-bin ".concat(t?"elements__trash-bin_visible":"elements__trash-bin_hidden"),n=e.likes.some((function(e){return e._id===f})),r="elements__like ".concat(n?"elements__like_active":"elements__like");return o.a.createElement(m,{key:e._id,card:e,cardDeleteButtonClassName:a,cardLikeButtonClassName:r,onCardClick:i,onCardLike:c,onCardDelete:s})}))))};var E=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var v=function(e){var t=e.name,a=e.isOpen,n=e.onClose,r=e.onSubmit,i=e.children;return o.a.createElement("div",{className:"popup popup_type_".concat(t," ").concat(a?"popup_visibility_visible":"")},o.a.createElement("div",{className:"popup__container"},o.a.createElement("button",{type:"button",className:"popup__exit",onClick:n}),o.a.createElement("form",{noValidate:!0,onSubmit:r,name:t,method:"post",action:"#"},i)))};var b=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,r=o.a.useState(""),i=Object(s.a)(r,2),c=i[0],l=i[1],u=o.a.useState(""),p=Object(s.a)(u,2),m=p[0],d=p[1],h=o.a.useContext(_);return o.a.useEffect((function(){l(h.name),d(h.about)}),[h]),o.a.createElement(v,{name:"bio",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:c,about:m})}},o.a.createElement("fieldset",{className:"popup__input-container popup__form popup__form_type_two-inputs"},o.a.createElement("h2",{className:"popup__title"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),o.a.createElement("input",{name:"name",value:c,onChange:function(e){l(e.target.value)},id:"name-input",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0438\u043c\u044f",required:!0,minLength:"2",maxLength:"40",className:"popup__input popup__input_name"}),o.a.createElement("span",{id:"name-input-error",className:"popup__error"}),o.a.createElement("input",{name:"bio",value:m,onChange:function(e){d(e.target.value)},id:"bio-input",type:"text",placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435",required:!0,minLength:"2",maxLength:"200",className:"popup__input popup__input_bio"}),o.a.createElement("span",{id:"bio-input-error",className:"popup__error"}),o.a.createElement("button",{type:"submit",className:"popup__save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))};var k=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,r=o.a.useRef();return o.a.createElement(v,{name:"avatar",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({avatar:r.current.value})}},o.a.createElement("fieldset",{className:"popup__input-container popup__form popup__form_type_one-input"},o.a.createElement("h2",{className:"popup__title"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"),o.a.createElement("input",{name:"avatar",ref:r,id:"avatar-input",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,className:"popup__input popup__input_link"}),o.a.createElement("span",{id:"avatar-input-error",className:"popup__error"}),o.a.createElement("button",{type:"submit",className:"popup__save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))};var C=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,r=o.a.useRef(),i=o.a.useRef();return o.a.createElement(v,{name:"card",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:r.current.value,link:i.current.value})}},o.a.createElement("fieldset",{className:"popup__input-container popup__form popup__form_type_two-inputs"},o.a.createElement("h2",{className:"popup__title"},"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e"),o.a.createElement("input",{name:"name",ref:r,id:"title-input",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30",className:"popup__input popup__input_title"}),o.a.createElement("span",{id:"title-input-error",className:"popup__error"}),o.a.createElement("input",{name:"link",ref:i,id:"link-input",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,className:"popup__input popup__input_link"}),o.a.createElement("span",{id:"link-input-error",className:"popup__error"}),o.a.createElement("button",{type:"submit",className:"popup__save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))};var N=function(e){var t=e.isOpen,a=e.onClose,n=e.selectedCard;return o.a.createElement("div",{className:"popup popup_type_max-photo ".concat(t?"popup_visibility_visible":"")},o.a.createElement("div",{className:"popup__container popup__container_type_photo"},o.a.createElement("button",{type:"button",className:"popup__exit",onClick:a}),o.a.createElement("img",{src:n?n.link:"",alt:n.name,className:"popup__photo"}),o.a.createElement("h2",{className:"popup__photo-title"},n.name)))},y=a(8),g=a(9),O=new(function(){function e(t){var a=t.token,n=t.url;Object(y.a)(this,e),this._token=a,this._url=n}return Object(g.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Oops! Error: ".concat(e.status))}},{key:"_handleError",value:function(e){return console.error(e),Promise.reject(e.message)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._handleResponse).catch(this._handleError)}},{key:"createCard",value:function(e,t){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t}),method:"POST"}).then(this._handleResponse).catch(this._handleError)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{headers:{authorization:this._token,"Content-Type":"application/json"},method:"DELETE"}).then(this._handleResponse).catch(this._handleError)}},{key:"likeCard",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{headers:{authorization:this._token,"Content-Type":"application/json"},method:"PUT"}).then(this._handleResponse).catch(this._handleError)}},{key:"dislikeCard",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{headers:{authorization:this._token,"Content-Type":"application/json"},method:"DELETE"}).then(this._handleResponse).catch(this._handleError)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._handleResponse).catch(this._handleError)}},{key:"setUserInfo",value:function(e,t){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t}),method:"PATCH"}).then(this._handleResponse).catch(this._handleError)}},{key:"setAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(e),method:"PATCH"}).then(this._handleResponse).catch(this._handleError)}}]),e}())({token:"4f12e696-6331-47e4-913f-e0c0002ac61f",url:"https://mesto.nomoreparties.co/v1/cohort-13",id:"13b75ba77788c0a719630101"});var j=function(){var e=o.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),i=Object(s.a)(r,2),l=i[0],u=i[1],m=o.a.useState(!1),d=Object(s.a)(m,2),h=d[0],v=d[1],y=o.a.useState(!1),g=Object(s.a)(y,2),j=g[0],S=g[1],x=o.a.useState(""),T=Object(s.a)(x,2),L=T[0],P=T[1],R=o.a.useState({}),w=Object(s.a)(R,2),A=w[0],D=w[1],U=o.a.useState([]),z=Object(s.a)(U,2),I=z[0],B=z[1];function q(){v(!1),n(!1),u(!1),S(!1),setTimeout((function(){P("")}),200)}return o.a.useEffect((function(){Promise.all([O.getUserInfo(),O.getInitialCards()]).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];D(a),B(n)}))}),[]),o.a.createElement(_.Provider,{value:A},o.a.createElement("div",{className:"page"},o.a.createElement(b,{isOpen:a,onClose:q,onUpdateUser:function(e){var t=e.name,a=e.about;O.setUserInfo(t,a).then((function(e){D(e),q()}))}}),o.a.createElement(C,{isOpen:l,onClose:q,onAddPlace:function(e){var t=e.name,a=e.link;O.createCard(t,a).then((function(e){B([e].concat(Object(c.a)(I))),q()}))}}),o.a.createElement(k,{isOpen:h,onClose:q,onUpdateAvatar:function(e){O.setAvatar(e).then((function(e){D(e),q()}))}}),o.a.createElement(N,{isOpen:j,onClose:q,selectedCard:L}),o.a.createElement(p,null),o.a.createElement(f,{cards:I,onEditProfile:function(){n(!0)},onAddPlace:function(){u(!0)},onEditAvatar:function(){v(!0)},onCardClick:function(e){P(e),S(!0)},onCardLike:function(e){function t(t){var a=I.map((function(a){return a._id===e._id?t:a}));B(a)}e.likes.some((function(e){return e._id===A._id}))?O.dislikeCard(e._id).then(t):O.likeCard(e._id).then(t)},onCardDelete:function(e){O.deleteCard(e._id).then((function(){var t=I.filter((function(t){return t!==e}));B(t)}))}}),o.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a.p+"static/media/logo.2b1f7ee5.svg"},7:function(e,t,a){e.exports=a.p+"static/media/userpic.c3b119f7.png"}},[[11,1,2]]]);
//# sourceMappingURL=main.2061aa8e.chunk.js.map